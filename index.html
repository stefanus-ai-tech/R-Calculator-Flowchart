<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Flowchart</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .container {
            display: flex;
            justify-content: space-between;
        }
        .flowchart {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 50%;
        }
        .node {
            width: 200px;
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            margin: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
            border: 2px solid #007bff;
            position: relative;
        }
        .node:hover {
            background-color: #f0f0f0;
        }
        .active {
            background-color: #007bff;
            color: white;
        }
        .process { border-radius: 0; }
        .terminal { border-radius: 40px; }
        .decision { transform: rotate(45deg); width: 120px; height: 120px; }
        .decision span { transform: rotate(-45deg); }
        .input { transform: skew(20deg); }
        .input span { transform: skew(-20deg); }
        .arrow {
            font-size: 24px;
            margin: 5px;
        }
        #explanation {
            width: 45%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
            position: sticky;
            top: 20px;
            max-height: 80vh;
            overflow-y: auto;
        }
        pre {
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>Kalkulator Flowchart</h1>
    <p>Klik pada setiap langkah untuk melihat penjelasan dan kode yang relevan.</p>
    <div class="container">
        <div class="flowchart">
            <div class="node terminal" data-step="1"><span>Start</span></div>
            <div class="arrow">↓</div>
            <div class="node input" data-step="2"><span>Masukan Angka Pertama</span></div>
            <div class="arrow">↓</div>
            <div class="node input" data-step="3"><span>Masukan Operator</span></div>
            <div class="arrow">↓</div>
            <div class="node input" data-step="4"><span>Masukan Angka Kedua</span></div>
            <div class="arrow">↓</div>
            <div class="node decision" data-step="5"><span>Pilih Operasi</span></div>
            <div class="arrow">↓</div>
            <div class="node process" data-step="6"><span>Hitung Hasil</span></div>
            <div class="arrow">↓</div>
            <div class="node decision" data-step="7"><span>Pembagian Nol?</span></div>
            <div class="arrow">↓</div>
            <div class="node process" data-step="8"><span>Tampilkan Hasil</span></div>
            <div class="arrow">↓</div>
            <div class="node terminal" data-step="9"><span>End</span></div>
        </div>
        <div id="explanation"></div>
    </div>

    <script>
        const explanations = {
            1: {
                text: "Program kalkulator dimulai di sini. Program ini akan memandu pengguna untuk memasukkan dua angka dan operator, lalu melakukan operasi yang sesuai. (program baru berjalan saat pemanggilan fungsi `kalkulator()` di kode paling bawah)",
                code: `kalkulator <- function() {`
            },
            2: {
                text: "Program meminta pengguna untuk memasukkan angka pertama. Input dikonversi menjadi nilai numerik.",
                code: `print("Masukan angka pertama:")
angka1 <- as.numeric(readline())`
            },
            3: {
                text: "Program meminta pengguna untuk memasukkan operator. Pengguna dapat memilih antara +, -, *, atau /.",
                code: `print("Masukan operator (+, -, *, /):")
operator <- readline()`
            },
            4: {
                text: "Program meminta pengguna untuk memasukkan angka kedua. Sekali lagi, input dikonversi menjadi nilai numerik.",
                code: `print("Masukan angka ke dua:")
angka2 <- as.numeric(readline())`
            },
            5: {
                text: "Program memeriksa operator mana yang dimasukkan dan mempersiapkan untuk melakukan operasi yang sesuai. Operasi yang mungkin adalah penjumlahan, pengurangan, perkalian, dan pembagian.",
                code: `hasil <- switch(operator,
                  "+" = angka1 + angka2,
                  "-" = angka1 - angka2,
                  "*" = angka1 * angka2,
                  "/" = ifelse(angka2 != 0, angka1 / angka2, "Gabisa dibagi 0, tidak terdefinisi"))`
                  
            },
            6: {
                text: "Program melakukan perhitungan berdasarkan operator yang dipilih. Hasil operasi disimpan dalam variabel `hasil`.",
                code: `"/" = ifelse(angka2 != 0, angka1 / angka2, "Gabisa dibagi 0, tidak terdefinisi"))`
            },
            7: {
                text: "Jika operasi yang dipilih adalah pembagian, program memeriksa apakah angka kedua adalah nol. Pembagian dengan nol tidak diperbolehkan, dan program akan mengembalikan pesan kesalahan daripada melakukan pembagian.",
                code: `"/" = ifelse(angka2 != 0, angka1 / angka2, "Gabisa dibagi 0, tidak terdefinisi"))`
            },
            8: {
                text: "Hasil perhitungan ditampilkan kepada pengguna. Jika pembagian dengan nol dicoba, pengguna akan melihat pesan kesalahan daripada hasil numerik.",
                code: `cat("Hasil:", hasil, "\\n")`
            },
            9: {
                text: "Program berakhir setelah menampilkan hasil.",
                code: `}`
            }
        };

        $('.node').on('click', function() {
            const step = $(this).data('step');
            const explanation = explanations[step];
            if (explanation) {
                $('#explanation').html(
                    '<h2>Penjelasan Langkah ' + step + '</h2>' +
                    '<p>' + explanation.text + '</p>' +
                    '<pre><code>' + explanation.code + '</code></pre>'
                );
                $('.node').removeClass('active');
                $(this).addClass('active');
            }
        });
    </script>
</body>
</html>
